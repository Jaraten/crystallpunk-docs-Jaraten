# Ключи и замки

Данная система является средневековым аналогом разделения территорий за определенными доступами. Учитывая, что оригинальный вариант с КПК и консолями ID карт слишком технологичен и не вписывается в игровой сеттинг, предлагается альтернативная система, завязанная на связках ключей и дверных замков.

## Замок

Самым главным элементом системы являются различные замки.
Замок - компонент, закрепленный на сущности (сундук, дверь), и контролирующий возможность интеракции с объектом.

Замок может быть заперт или открыт.

В замке хранится последовательность из X элементов, набранных из вариантов ниже:
- Выпуклость
- Углубление
- Ровная поверхность

Сложность замка определяется длительностью комбинации, возможными отдельными системами магической сигнализаций, и шансами сломать отмычку.

Если замок разблокирован, у игроков есть возможность "снять" его, лишив объект возможности запираться.

Это работает и в обратную сторону - игроки могут повесить новый замок на объект.

В любом случае, замок не является 100% методом защиты - при достаточном шуме и времени, объект можно просто сломать.

## Ключи

Ключ - физический объект, так же хранящий внутри себя последовательность таких же элементов. 

Ключ можно использовать на объекте с замком, и если последовательность ключа равна инвертированной последовательности замка, замок отпирается\запирается.

Ключ можно осмотреть, и увидеть комбинацию элементов. Эту комбинацию можно запомнить, чтобы например успешно взламывать замки, или делать копии ключа.

![image](https://github.com/crystallpunk-14/crystallpunk-docs/assets/96445749/1d3d8f6c-e56e-42bf-b4d1-3be65d3fc61d)

Учитывая, что ключй у одного игрока может быть достаточно большое количество, для их хранения будет выделен отдельный слот, куда можно повесить "Связку ключей". Это специальный инвентарь, в котором можно хранить только ключи. Связка будет иметь QoL функцию: Использование всей связки по замку автоматически будет пытаться искать необходимый ключ для взаимодействия.

## Отмычка

Отмычка - инструмент антагонистов, которым можно взаимодействовать с замками. Отмычку можно использовать на любом объекте с замком, имитируя один из трех элементов выше. 

"Ввод" правильного элемента вызовет небольшой щелчок, сообщающий о успешном взломе элемента, что позволит перейти к взлому следующего.

Если вся последовательность, записанная в замке воспроизведена отмычкой корректно, замок открывается или запирается.

Если игрок допускает ошибку, выбирая не тот тип взаимодействия, весь прогресс взлома сбрасывается, а отмычка имеет шанс сломаться. Это так же издает громкий характерный звук, который может привлечь внимание.

Дополнительно, после осмотра замка, над которым провели неудачный взлом, можно увидеть сообщение вроде "Замок выглядит так, словно его пытались взломать"

---

# Связанные механики

## Создание ключей и замков

Ключи - воспроизводимый и не уникальный объект. У игроков должна быть способность создавать свои ключи и свои замки, делая таким образом "уникальные" доступы.

Если игрок каким-то методом узнал последовательность элементов конкретного замка (изучил нужный ключ, сделал отпечаток в мыле), он может сделать копию этого замка.

Как контрмера замкам, которые взломали и изучили, игроки могут заменить замки на новые, в том числе с улучшенной защитой.

Процесс создания ключей и замков завязан на геймплее (Еще не расписанного отдела).

## Процедурная генерация

Каждый раунд все замки и ключи определенных категорий (например "склад") получают рандомно сгенерированную уникальную последовательность элементов. Это гарантирует невозможность запоминания последовательностей из других раундов.
